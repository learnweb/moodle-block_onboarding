{"version":3,"sources":["../src/steps_view.js"],"names":["define","$","ajax","notification","str","confetti_toogle","step_string","achievement_string","reset_message_string","on","promises","call","methodname","args","done","response","completed","css","achievement","text","name","confetti","setTimeout","steptitle2","document","getElementsByClassName","innerHTML","position","stepdescription","description","progress","fail","exception","steptitle","reset_confirmation","confirm","location","reload","visibility","achievement_canvas","getElementById","width","offsetWidth","height","offsetHeight","context","getContext","particle","number_of_particles","lastUpdateTime","Date","now","randomColor","colors","Math","floor","random","length","update","dif","i","p","y","splice","gravity","rotation","rotationSpeed","push","Particle","draw","clearRect","forEach","save","fillStyle","color","translate","x","size","rotate","fillRect","restore","requestAnimationFrame","PI","init","step_promise","get_string","achievement_promise","reset_message_promise","when","step_promise_string","achievement_promise_string","reset_message_promise_string","blocktitle"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Java Script functions for dynamically displaying steps within the First Steps section.\n *\n * @package    block_onboarding\n * @copyright  2021 Westfälische Wilhelms-Universität Münster\n * @license    https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/ajax', 'core/notification', 'core/str'], function ($, ajax, notification, str) {\n\n    // Toggles confetti - confetti is only displayed for achievement steps.\n    var confetti_toogle = false;\n    // Default backup strings.\n    var step_string = 'Step ';\n    var achievement_string = 'Achviement! ';\n    var reset_message_string = 'Do you really want to reset your progress?\\nAll progress will be lost permanently.';\n\n    /**\n     * Provides the First Steps section with content upon loading the Guide page and gets the required language strings.\n     *\n     * @returns {Boolean} false\n     */\n    var init = function () {\n        // Gets language strings from block_onboarding language PHP file.\n        var step_promise = str.get_string('step_step_js', 'block_onboarding');\n        var achievement_promise = str.get_string('step_achievement_js', 'block_onboarding');\n        var reset_message_promise = str.get_string('button_reset_message_js', 'block_onboarding');\n        $.when(step_promise, achievement_promise, reset_message_promise)\n            .done(function (step_promise_string, achievement_promise_string, reset_message_promise_string) {\n                // Replaces default backup strings with retrieved language strings.\n                step_string = step_promise_string;\n                achievement_string = achievement_promise_string;\n                reset_message_string = reset_message_promise_string;\n                // AJAX call to externallib.php method to get initialize First Steps section with current user step.\n                var promises = ajax.call([{\n                    methodname: 'block_onboarding_init_step',\n                    args: {}\n                }]);\n                promises[0].done(function (response) {\n                    // Toggles visibility of First Steps section. Visibility is 'hidden' by default.\n                    if(response.visibility == 0){\n                        $('.block-onboarding-steps-show-btn').css('display', 'inline');\n                    } else if(response.visibility == 1){\n                        $('.block-onboarding-steps-hide-btn').css('display', 'inline');\n                        $('.block-onboarding-steps-container').css('display', 'block');\n                    } else {\n                        $('.block-onboarding-steps-container').css('display', 'block');\n                    }\n                    // Toggles 'completed'-indicator of First Steps section. When all steps are completed and the\n                    // user has reached the max step, a 'Reset progress'-button is displayed.\n                    if (response.completed == 2) {\n                        $('.block-onboarding-steps-step-completed').css('visibility', 'visible');\n                        $('.block-onboarding-steps-next-btn').css('display', 'none');\n                        $('.block-onboarding-steps-reset-btn').css('visibility', 'visible');\n                    } else if (response.completed == 1) {\n                        $('.block-onboarding-steps-step-completed').css('visibility', 'visible');\n                    } else {\n                        $('.block-onboarding-steps-step-completed').css('visibility', 'hidden');\n                    }\n                    // Determines whether step is a regular step or an achievement step. Displays confetti animation\n                    // for achievement steps.\n                    if (response.achievement == 1) {\n                        $('.block-onboarding-steps-step-title').text(achievement_string + response.name);\n                        confetti_toogle = true;\n                        confetti();\n                        setTimeout(function () {\n                            confetti_toogle = false;\n                        }, 4000);\n                    } else {\n                        let blocktitle = document.getElementsByClassName('block-onboarding-steps-step-title');\n                        blocktitle[0].innerHTML = step_string + response.position + ': ' + response.name;\n                    }\n                    // Fills First Steps section with retrieved content.\n                    let steptitle2 = document.getElementsByClassName('block-onboarding-steps-step-description');\n                    steptitle2[0].innerHTML = response.description;\n                    $('.block-onboarding-steps-progress-bar-value').text(response.progress + '%');\n                    $('.block-onboarding-steps-progress-bar-fill').css('width', (response.progress + '%'));\n                }).fail(notification.exception);\n                return false;\n            });\n    };\n\n    /**\n     * JQuery click event listener for 'Next'-button clicks in the First Steps section.\n     *\n     * @returns {Boolean} false\n     */\n    $('.block-onboarding-steps-next-btn').on('click', function () {\n        // AJAX call to externallib.php method to get next step.\n        var promises = ajax.call([{\n            methodname: 'block_onboarding_next_step',\n            args: {}\n        }]);\n        promises[0].done(function (response) {\n            // Toggles 'completed'-indicator of First Steps section. When all steps are completed and the\n            // user has reached the max step, a 'Reset progress'-button is displayed.\n            if (response.completed == 2) {\n                $('.block-onboarding-steps-step-completed').css('visibility', 'visible');\n                $('.block-onboarding-steps-next-btn').css('display', 'none');\n                $('.block-onboarding-steps-reset-btn').css('visibility', 'visible');\n            } else if (response.completed == 1) {\n                $('.block-onboarding-steps-step-completed').css('visibility', 'visible');\n            } else {\n                $('.block-onboarding-steps-step-completed').css('visibility', 'hidden');\n            }\n            // Determines whether next step is a regular step or an achievement step. Displays confetti animation\n            // for achievement steps.\n            if (response.achievement == 1) {\n                $('.block-onboarding-steps-step-title').text(achievement_string + response.name);\n                confetti_toogle = true;\n                confetti();\n                setTimeout(function () {\n                    confetti_toogle = false;\n                }, 4000);\n            } else {\n                let steptitle2 = document.getElementsByClassName('block-onboarding-steps-step-title');\n                steptitle2[0].innerHTML = step_string + response.position + ': ' + response.name;\n                confetti_toogle = false;\n            }\n            // Fills First Steps section with retrieved content of next step.\n            let stepdescription= document.getElementsByClassName('block-onboarding-steps-step-description');\n            stepdescription[0].innerHTML = response.description;\n            $('.block-onboarding-steps-progress-bar-value').text(response.progress + '%');\n            $('.block-onboarding-steps-progress-bar-fill').css('width', (response.progress + '%'));\n        }).fail(notification.exception);\n        return false;\n    });\n\n    /**\n     * JQuery click event listener for 'Back'-button clicks in the First Steps section.\n     *\n     * @returns {Boolean} false\n     */\n    $('.block-onboarding-steps-back-btn').on('click', function () {\n        // AJAX call to externallib.php method to get preceding step.\n        var promises = ajax.call([{\n            methodname: 'block_onboarding_preceding_step',\n            args: {}\n        }]);\n        promises[0].done(function (response) {\n            // Hides 'Back'-button and displays 'Next'-button by default.\n            $('.block-onboarding-steps-reset-btn').css('visibility', 'hidden');\n            $('.block-onboarding-steps-next-btn').css('display', 'inline');\n            // Toggles 'completed'-indicator of First Steps section.\n            if (response.completed == 1 || response.completed == 2) {\n                $('.block-onboarding-steps-step-completed').css('visibility', 'visible');\n            } else {\n                $('.block-onboarding-steps-step-completed').css('visibility', 'hidden');\n            }\n            // Determines whether preceding step is a regular step or an achievement step. Displays confetti animation\n            // for achievement steps.\n            if (response.achievement == 1) {\n                let steptitle2 = document.getElementsByClassName('block-onboarding-steps-step-title');\n                steptitle2[0].innerHTML = achievement_string + response.name;\n                confetti_toogle = true;\n                confetti();\n                setTimeout(function () {\n                    confetti_toogle = false;\n                }, 4000);\n            } else {\n                let steptitle = document.getElementsByClassName('block-onboarding-steps-step-title');\n                steptitle[0].innerHTML = step_string + response.position + ': ' + response.name;\n                confetti_toogle = false;\n            }\n            // Updated First Steps description box with retrieved information.\n            let stepdescription = document.getElementsByClassName('block-onboarding-steps-step-description');\n            stepdescription[0].innerHTML = response.description;\n        }).fail(notification.exception);\n        return false;\n    });\n\n    /**\n     * JQuery click event listener for 'Reset'-button clicks in the First Steps section.\n     * The 'Reset'-button will only be visible, when the user has completed all steps and is currently at\n     * the max step position.\n     *\n     * @returns {Boolean} false\n     */\n    $('.block-onboarding-steps-reset-btn').on('click', function () {\n        // Displays confirmation popup asking the user to confirm the reset process.\n        var reset_confirmation = confirm(reset_message_string);\n        if (reset_confirmation == true) {\n            // AJAX call to externallib.php method to reset user progress.\n            var promises = ajax.call([{\n                methodname: 'block_onboarding_reset_progress',\n                args: {}\n            }]);\n            // Reloads current page upon progress deletion to initialize new records for user's First Steps section.\n            // eslint-disable-next-line no-unused-vars\n            promises[0].done(function (response) {\n                location.reload();\n                return false;\n            }).fail(notification.exception);\n            return false;\n        }\n    });\n\n    /**\n     * JQuery click event listener for 'Hide'-button clicks in the First Steps section.\n     * Clicking the 'Hide'-button will make the whole First Steps section invisible.\n     *\n     * @returns {Boolean} false\n     */\n    $('.block-onboarding-steps-hide-btn').on('click', function () {\n        var visibility = 0;\n        // AJAX call to externallib.php method to update visibility value.\n        var promises = ajax.call([{\n            methodname: 'block_onboarding_toggle_visibility',\n            args: {\n                visibility: visibility\n            }\n        }]);\n        // Hides First Steps section and toggles 'Hide'-/'Show'-buttons.\n        // eslint-disable-next-line no-unused-vars\n        promises[0].done(function (reponse) {\n            $('.block-onboarding-steps-hide-btn').css('display', 'none');\n            $('.block-onboarding-steps-show-btn').css('display', 'inline');\n            $('.block-onboarding-steps-container').css('display', 'none');\n        }).fail(notification.exception);\n        return false;\n    });\n\n    /**\n     * JQuery click event listener for 'Show'-button clicks in the First Steps section.\n     * Clicking the 'Show'-button will make the First Steps reappear.\n     *\n     * @returns {Boolean} false\n     */\n    $('.block-onboarding-steps-show-btn').on('click', function () {\n        var visibility = 1;\n        // AJAX call to externallib.php method to update visibility value.\n        var promises = ajax.call([{\n            methodname: 'block_onboarding_toggle_visibility',\n            args: {\n                visibility: visibility\n            }\n        }]);\n        // Displays First Steps section and toggles 'Hide'-/'Show'-buttons.\n        // eslint-disable-next-line no-unused-vars\n        promises[0].done(function (response) {\n            $('.block-onboarding-steps-hide-btn').css('display', 'inline');\n            $('.block-onboarding-steps-show-btn').css('display', 'none');\n            $('.block-onboarding-steps-container').css('display', 'block');\n        }).fail(notification.exception);\n        return false;\n    });\n\n    /**\n     * Confetti function to display confetti animation within the First Steps section.\n     * The confetti animation will only be played for a brief period when the user has reached an achievement step.\n     */\n    var confetti = function () {\n        // The confetti function utilizes an HTML canvas which is present as an overlay over the First Steps functions.\n        let achievement_canvas = document.getElementById('block-onboarding-steps-achievement-confetti');\n        achievement_canvas.width = document\n            .getElementById('block-onboarding-steps-achievement-confetti').offsetWidth;\n        achievement_canvas.height = document\n            .getElementById('block-onboarding-steps-achievement-confetti').offsetHeight;\n\n        // Initialization of base parameters.\n        let context = achievement_canvas.getContext('2d');\n        let particle = [];\n        let number_of_particles = 45;\n        let lastUpdateTime = Date.now();\n\n        /**\n         * Color randomizer function.\n         * Randomizes the color of the generated confetti particles.\n         *\n         * @returns {(string|Array.)} generated colors\n         */\n        function randomColor() {\n            let colors = ['#f00', '#0f0', '#00f', '#0ff', '#f0f', '#ff0'];\n            return colors[Math.floor(Math.random() * colors.length)];\n        }\n\n        /**\n         * Canvas update function.\n         * Updates particle positions and rotation of confetti particles.\n         */\n        function update() {\n            let now = Date.now(),\n                dif = now - lastUpdateTime;\n            for (let i = particle.length - 1; i >= 0; i--) {\n                let p = particle[i];\n                if (p.y > achievement_canvas.height) {\n                    particle.splice(i, 1);\n                    continue;\n                }\n                p.y += p.gravity * dif;\n                p.rotation += p.rotationSpeed * dif;\n            }\n            // eslint-disable-next-line no-unmodified-loop-condition\n            while (particle.length < number_of_particles && confetti_toogle == true) {\n                particle.push(new Particle(Math.random() * achievement_canvas.width, -20));\n            }\n            lastUpdateTime = now;\n            setTimeout(update, 1);\n        }\n\n        /**\n         * Canvas draws function.\n         * Draws generated confetti particles on the HTML canvas.\n         */\n        function draw() {\n            context.clearRect(0, 0, achievement_canvas.width, achievement_canvas.height);\n            particle.forEach(function (p) {\n                context.save();\n                context.fillStyle = p.color;\n                context.translate(p.x + p.size / 2, p.y + p.size / 2);\n                context.rotate(p.rotation);\n                context.fillRect(-p.size / 2, -p.size / 2, p.size, p.size);\n                context.restore();\n            });\n            requestAnimationFrame(draw);\n        }\n\n        /**\n         * Particle function.\n         * Randomly generates confetti particle parameters.\n         *\n         * @param {int} x x-coordinate\n         * @param {int} y y-coordinate\n         */\n        function Particle(x, y) {\n            this.x = x;\n            this.y = y;\n            this.size = (Math.random() * 0.5 + 0.75) * 15;\n            this.gravity = (Math.random() * 0.5 + 0.75) * 0.1;\n            this.rotation = (Math.PI * 2) * Math.random();\n            this.rotationSpeed = (Math.PI * 2) * (Math.random() - 0.5) * 0.001;\n            this.color = randomColor();\n        }\n\n        //  Updates and draws confetti particles on HTML canvas as long as confetti toggle is set to true.\n        // eslint-disable-next-line no-unmodified-loop-condition\n        while (particle.length < number_of_particles && confetti_toogle == true) {\n            particle.push(new Particle(Math.random() * achievement_canvas.width,\n                Math.random() * achievement_canvas.height));\n        }\n        update();\n        draw();\n    };\n\n    // Returns init method to be called by PHP page implementing the functions.\n    return {\n        init: init\n    };\n});\n"],"file":"steps_view.min.js"}