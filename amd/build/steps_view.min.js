define ("block_onboarding/steps_view",["jquery","core/ajax","core/notification","core/str"],function(a,b,c,d){var e=!1,f="Step ",g="Achviement! ",h="Do you really want to reset your progress?\nAll progress will be lost permanently.";a(".block-onboarding-steps-next-btn").on("click",function(){var d=b.call([{methodname:"block_onboarding_next_step",args:{}}]);d[0].done(function(b){if(2==b.completed){a(".block-onboarding-steps-step-completed").css("visibility","visible");a(".block-onboarding-steps-next-btn").css("display","none");a(".block-onboarding-steps-reset-btn").css("visibility","visible")}else if(1==b.completed){a(".block-onboarding-steps-step-completed").css("visibility","visible")}else{a(".block-onboarding-steps-step-completed").css("visibility","hidden")}if(1==b.achievement){a(".block-onboarding-steps-step-title").text(g+b.name);e=!0;i();setTimeout(function(){e=!1},4e3)}else{var d=document.getElementsByClassName("block-onboarding-steps-step-title");d[0].innerHTML=f+b.position+": "+b.name;e=!1}var c=document.getElementsByClassName("block-onboarding-steps-step-description");c[0].innerHTML=b.description;a(".block-onboarding-steps-progress-bar-value").text(b.progress+"%");a(".block-onboarding-steps-progress-bar-fill").css("width",b.progress+"%")}).fail(c.exception);return!1});a(".block-onboarding-steps-back-btn").on("click",function(){var d=b.call([{methodname:"block_onboarding_preceding_step",args:{}}]);d[0].done(function(b){a(".block-onboarding-steps-reset-btn").css("visibility","hidden");a(".block-onboarding-steps-next-btn").css("display","inline");if(1==b.completed||2==b.completed){a(".block-onboarding-steps-step-completed").css("visibility","visible")}else{a(".block-onboarding-steps-step-completed").css("visibility","hidden")}if(1==b.achievement){var d=document.getElementsByClassName("block-onboarding-steps-step-title");d[0].innerHTML=g+b.name;e=!0;i();setTimeout(function(){e=!1},4e3)}else{var h=document.getElementsByClassName("block-onboarding-steps-step-title");h[0].innerHTML=f+b.position+": "+b.name;e=!1}var c=document.getElementsByClassName("block-onboarding-steps-step-description");c[0].innerHTML=b.description}).fail(c.exception);return!1});a(".block-onboarding-steps-reset-btn").on("click",function(){var a=confirm(h);if(!0==a){var d=b.call([{methodname:"block_onboarding_reset_progress",args:{}}]);d[0].done(function(){location.reload();return!1}).fail(c.exception);return!1}});a(".block-onboarding-steps-hide-btn").on("click",function(){var d=b.call([{methodname:"block_onboarding_toggle_visibility",args:{visibility:0}}]);d[0].done(function(){a(".block-onboarding-steps-hide-btn").css("display","none");a(".block-onboarding-steps-show-btn").css("display","inline");a(".block-onboarding-steps-container").css("display","none")}).fail(c.exception);return!1});a(".block-onboarding-steps-show-btn").on("click",function(){var d=b.call([{methodname:"block_onboarding_toggle_visibility",args:{visibility:1}}]);d[0].done(function(){a(".block-onboarding-steps-hide-btn").css("display","inline");a(".block-onboarding-steps-show-btn").css("display","none");a(".block-onboarding-steps-container").css("display","block")}).fail(c.exception);return!1});var i=function(){var f=document.getElementById("block-onboarding-steps-achievement-confetti");f.width=document.getElementById("block-onboarding-steps-achievement-confetti").offsetWidth;f.height=document.getElementById("block-onboarding-steps-achievement-confetti").offsetHeight;var g=f.getContext("2d"),h=[],i=45,j=Date.now();function a(){var a=["#f00","#0f0","#00f","#0ff","#f0f","#ff0"];return a[Math.floor(Math.random()*a.length)]}function b(){for(var a=Date.now(),c=a-j,g=h.length-1,k;0<=g;g--){k=h[g];if(k.y>f.height){h.splice(g,1);continue}k.y+=k.gravity*c;k.rotation+=k.rotationSpeed*c}while(h.length<i&&!0==e){h.push(new d(Math.random()*f.width,-20))}j=a;setTimeout(b,1)}function c(){g.clearRect(0,0,f.width,f.height);h.forEach(function(a){g.save();g.fillStyle=a.color;g.translate(a.x+a.size/2,a.y+a.size/2);g.rotate(a.rotation);g.fillRect(-a.size/2,-a.size/2,a.size,a.size);g.restore()});requestAnimationFrame(c)}function d(b,c){this.x=b;this.y=c;this.size=15*(.5*Math.random()+.75);this.gravity=.1*(.5*Math.random()+.75);this.rotation=2*Math.PI*Math.random();this.rotationSpeed=.001*(2*Math.PI*(Math.random()-.5));this.color=a()}while(h.length<i&&!0==e){h.push(new d(Math.random()*f.width,Math.random()*f.height))}b();c()};return{init:function init(){var j=d.get_string("step_step_js","block_onboarding"),k=d.get_string("step_achievement_js","block_onboarding"),l=d.get_string("button_reset_message_js","block_onboarding");a.when(j,k,l).done(function(d,j,k){f=d;g=j;h=k;var l=b.call([{methodname:"block_onboarding_init_step",args:{}}]);l[0].done(function(b){if(0==b.visibility){a(".block-onboarding-steps-show-btn").css("display","inline")}else if(1==b.visibility){a(".block-onboarding-steps-hide-btn").css("display","inline");a(".block-onboarding-steps-container").css("display","block")}else{a(".block-onboarding-steps-container").css("display","block")}if(2==b.completed){a(".block-onboarding-steps-step-completed").css("visibility","visible");a(".block-onboarding-steps-next-btn").css("display","none");a(".block-onboarding-steps-reset-btn").css("visibility","visible")}else if(1==b.completed){a(".block-onboarding-steps-step-completed").css("visibility","visible")}else{a(".block-onboarding-steps-step-completed").css("visibility","hidden")}if(1==b.achievement){a(".block-onboarding-steps-step-title").text(g+b.name);e=!0;i();setTimeout(function(){e=!1},4e3)}else{var d=document.getElementsByClassName("block-onboarding-steps-step-title");d[0].innerHTML=f+b.position+": "+b.name}var c=document.getElementsByClassName("block-onboarding-steps-step-description");c[0].innerHTML=b.description;a(".block-onboarding-steps-progress-bar-value").text(b.progress+"%");a(".block-onboarding-steps-progress-bar-fill").css("width",b.progress+"%")}).fail(c.exception);return!1})}}});
//# sourceMappingURL=steps_view.min.js.map
